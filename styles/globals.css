/* THEME */
:root {
  --background: #ffffff;
  --foreground: #171717;

  /* visualizer colors */
  --cell-border: #e5e7eb;
  --cell-wall: #6b21a8;     /* high-contrast walls */
  --cell-visited: #8ec5ff;  /* light blue */
  --cell-path: #f59e0b;     /* bright amber */
  --cell-start: #16a34a;
  --cell-goal: #ef4444;

  --panel-border: #e5e7eb;
  --panel-bg: #fafafa;
  --button-bg: transparent;
  --button-bg-active: #e5e7eb;
  --button-border: #d1d5db;
}

@media (prefers-color-scheme: dark) {
  :root {
    -background: #0a0a0a;
    --foreground: #ededed;

    --cell-border: #2a2a2a;
    --cell-wall: #4c1d95;   /* deeper purple walls (dark mode) */
    --cell-visited: #3b82f6;  /* strong blue */
    --cell-path: #f59e0b;     /* amber */
    --cell-start: #16a34a;
    --cell-goal: #dc2626;

    --panel-border: #2a2a2a;
    --panel-bg: #111111;
    --button-bg-active: #1f2937;
    --button-border: #303030;
  }
}

/* BASE */
html, body { max-width: 100vw; overflow-x: hidden; }
body {
  color: var(--foreground);
  background: var(--background);
  font-family: Arial, Helvetica, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
* { box-sizing: border-box; padding: 0; margin: 0; }
a { color: inherit; text-decoration: none; }
@media (prefers-color-scheme: dark) { html { color-scheme: dark; } }

/* CONTROLS */
.controls {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr auto;
  gap: 12px;
  align-items: center;
  width: 100%;
  max-width: 980px;
  margin: 0 auto 16px auto;
  padding: 12px;
  border: 1px solid var(--panel-border);
  border-radius: 12px;
  background: var(--panel-bg);
}
.controls label { font-weight: 600; margin-right: 8px; white-space: nowrap; }
.controls .modes, .controls .algos, .controls .speed, .controls .resets {
  display: flex; align-items: center; gap: 8px; flex-wrap: wrap;
}
.controls button, .controls select {
  padding: 10px 14px;
  border: 1px solid var(--button-border);
  border-radius: 10px;
  background: var(--button-bg);
  color: inherit;
  cursor: pointer;
  min-height: 44px;            /* finger-friendly tap target */
}
.controls button.active { background: var(--button-bg-active); }
.controls input[type="range"] { accent-color: var(--cell-path); }

/* GRID: auto-fit width, perfect squares, mobile friendly */
.grid-wrapper {
  width: 100%;
  max-width: 980px;            /* cap on large desktops */
  margin: 12px auto 0 auto;
  aspect-ratio: 1 / 1;         /* keep grid square; fills width */
}
.grid {
  display: inline-block;
  width: 100%;
  height: 100%;
  border: 2px solid var(--panel-border);
  border-radius: 6px;
  user-select: none;
  touch-action: none;          /* improves touch drawing on mobile */
}
.row { display: flex; flex: 1; }
.cell {
  flex: 1;                     /* evenly fill row */
  aspect-ratio: 1 / 1;         /* each cell is square */
  border: 1px solid var(--cell-border);
  transition: background-color 120ms linear, box-shadow 120ms linear;
}

/* STATES */
.cell.wall   { background: var(--cell-wall); }
.cell.visited{ background: var(--cell-visited); }
.cell.path   { background: var(--cell-path); }
.cell.start  { background: var(--cell-start); }
.cell.goal   { background: var(--cell-goal); }
.cell:focus-visible { outline: 2px solid var(--cell-path); outline-offset: -2px; }
.cell:hover { box-shadow: inset 0 0 0 1px rgba(0,0,0,0.12); }

/* RESPONSIVE TWEAKS */
@media (max-width: 900px) { .controls { grid-template-columns: 1fr 1fr; } }
@media (max-width: 600px) {
  .controls { grid-template-columns: 1fr; }
  .controls .speed { justify-content: space-between; }
}
